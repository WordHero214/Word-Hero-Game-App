â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  FIRESTORE USAGE OPTIMIZATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ GOAL: Reduce Firestore reads to stay within free tier limits

ğŸ“Š BEFORE OPTIMIZATION:
  â€¢ Real-time onSnapshot listener on words collection
  â€¢ Fired on EVERY page load for ALL users
  â€¢ ~60 reads per user login (all words)
  â€¢ Multiple users = quota exceeded quickly

âœ… AFTER OPTIMIZATION:
  â€¢ Students use LOCAL words only (0 Firestore reads!)
  â€¢ Teachers/Admins get ONE-TIME fetch (not real-time)
  â€¢ ~60 reads only for teachers, 0 for students
  â€¢ 90%+ reduction in Firestore usage!

ğŸ”§ CHANGES MADE:

1. REMOVED Real-Time Listener (onSnapshot)
   - Old: Continuous sync, fires on every change
   - New: One-time fetch with getDocs()
   - Savings: ~60 reads per student login

2. STUDENTS USE LOCAL WORDS ONLY
   - Students get bilingual words from bilingualWords.ts
   - No Firestore reads for students
   - Works 100% offline
   - Savings: Massive! 0 reads for 90% of users

3. TEACHERS GET ONE-TIME FETCH
   - Teachers/Admins fetch custom words once
   - Only when they log in
   - No continuous syncing
   - Savings: ~50% reduction for teachers

4. ADDED getDocs IMPORT
   - Replaced onSnapshot with getDocs
   - One-time fetch instead of listener

ğŸ“ˆ EXPECTED SAVINGS:

Scenario: 20 students + 2 teachers

BEFORE:
  â€¢ 20 students Ã— 60 reads = 1,200 reads
  â€¢ 2 teachers Ã— 60 reads = 120 reads
  â€¢ Total: 1,320 reads per day

AFTER:
  â€¢ 20 students Ã— 0 reads = 0 reads
  â€¢ 2 teachers Ã— 60 reads = 120 reads
  â€¢ Total: 120 reads per day

SAVINGS: 91% reduction! (1,200 reads saved)

ğŸ“ HOW IT WORKS NOW:

STUDENTS:
  1. Login â†’ Load local words from bilingualWords.ts
  2. Filter by grade level (cumulative)
  3. Play games with local words
  4. NO Firestore reads!
  5. Works 100% offline

TEACHERS/ADMINS:
  1. Login â†’ Load local words first
  2. Fetch custom words from Firestore (one-time)
  3. Cache for offline use
  4. Can add/edit words in Word Bank
  5. Students will see new words on next login

ğŸ“ IMPORTANT NOTES:

â€¢ Students always use local words (60 bilingual words)
â€¢ Teachers can add custom words via Word Bank
â€¢ Custom words only visible to teachers/admins
â€¢ Students need to refresh to see new custom words
â€¢ This is a trade-off: Less real-time, more quota-friendly

ğŸš€ ADDITIONAL OPTIMIZATIONS POSSIBLE:

1. Cache user data in localStorage
2. Batch progress updates (write once per session)
3. Lazy load leaderboard data
4. Debounce word bank searches
5. Use IndexedDB for larger caches

ğŸ’¡ RECOMMENDATION:

For production with many users, consider:
â€¢ Upgrade to Blaze plan (pay-as-you-go)
â€¢ Set budget alerts ($5-10/month)
â€¢ Monitor usage in Firebase Console
â€¢ Current optimization should keep you in free tier!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
